openstack network create  --share internal
openstack subnet create --network internal \
  --allocation-pool start=10.202.254.3,end=10.202.254.254 \
  --dns-nameserver 8.8.8.8 --gateway 10.202.254.1 \
  --subnet-range 10.202.254.0/24 sub-int-net


# Create an external network to access the internet.
openstack network create --external \
--provider-network-type flat \
--provider-physical-network physnet1 ext-net

openstack subnet create --network ext-net \
  --allocation-pool start=172.23.16.16,end=172.23.16.254 \
  --dns-nameserver 8.8.8.8 --gateway 172.23.16.1 \
  --subnet-range 172.23.16.0/24 sub-ext-net


# Add router and set the router to subnet: sn1
openstack router create rt-ext
openstack router set rt-ext --external-gateway  ext-net
openstack router add subnet rt-ext sub-int-net


# Borrar la red...
openstack router unset rt-ext --external-gateway
openstack router remove subnet rt-ext sn1
openstack network delete ext-net

